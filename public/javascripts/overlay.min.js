var iosOverlay=function(e){"use strict";var t;var n=function(){};var r={onbeforeshow:n,onshow:n,onbeforehide:n,onhide:n,text:"",icon:null,spinner:null,duration:null,id:null,parentEl:null};var i=function(e,t){var n={};for(var r in e){n[r]=e[r]}for(var i in t){n[i]=t[i]}return n};var s=function(){var e=document.body||document.documentElement;var t=e.style;var n="transition";if(typeof t[n]==="string"){return true}var r=["Moz","Webkit","Khtml","O","ms"];n=n.charAt(0).toUpperCase()+n.substr(1);for(var i=0;i<r.length;i++){if(typeof t[r[i]+n]==="string"){return true}}return false}();var o=i(r,e);var u=function(e){if(e.animationName==="ios-overlay-show"){o.onshow()}if(e.animationName==="ios-overlay-hide"){l();o.onhide()}};var a=function(){t=document.createElement("div");t.className="ui-ios-overlay";t.innerHTML+='<span class="title">'+o.text+"</span";if(e.icon){t.innerHTML+='<img src="'+e.icon+'">'}else if(e.spinner){t.appendChild(e.spinner.el)}if(s){t.addEventListener("webkitAnimationEnd",u,false);t.addEventListener("msAnimationEnd",u,false);t.addEventListener("oAnimationEnd",u,false);t.addEventListener("animationend",u,false)}if(e.parentEl){document.getElementById(e.parentEl).appendChild(t)}else{document.body.appendChild(t)}o.onbeforeshow();if(s){t.className+=" ios-overlay-show"}else if(typeof $==="function"){$(t).fadeIn({duration:200},function(){o.onshow()})}if(o.duration){window.setTimeout(function(){f()},o.duration)}}();var f=function(){o.onbeforehide();if(s){t.className=t.className.replace("show","hide")}else if(typeof $==="function"){$(t).fadeOut({duration:200},function(){l();o.onhide()})}};var l=function(){if(e.parentEl){document.getElementById(e.parentEl).removeChild(t)}else{document.body.removeChild(t)}};var c=function(e){if(e.text){t.getElementsByTagName("span")[0].innerHTML=e.text}if(e.icon){if(o.spinner){o.spinner.el.parentNode.removeChild(o.spinner.el)}t.innerHTML+='<img src="'+e.icon+'">'}};return{hide:f,destroy:l,update:c}}